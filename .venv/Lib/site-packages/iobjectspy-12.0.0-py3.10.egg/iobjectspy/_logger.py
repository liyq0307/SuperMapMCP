import logging.config
import multiprocessing

__all__ = ['log_error', 'log_warning', 'log_debug', 'log_fatal', 'log_info']

import os

logging.config.fileConfig(os.path.dirname(os.path.abspath(__file__)) + '/log.conf')
logger = logging.getLogger('root')


# 定义一个函数，用于检查是否是主进程
def is_main_process():
    return multiprocessing.current_process().name == "MainProcess"


# 包装日志函数，仅主进程输出日志
def log_error(*args, **kwargs):
    if is_main_process():
        logger.error(*args, **kwargs)


def log_warning(*args, **kwargs):
    if is_main_process():
        logger.warning(*args, **kwargs)


def log_fatal(*args, **kwargs):
    if is_main_process():
        logger.critical(*args, **kwargs)


def log_info(*args, **kwargs):
    if is_main_process():
        logger.info(*args, **kwargs)


def log_debug(*args, **kwargs):
    if is_main_process():
        logger.debug(*args, **kwargs)
